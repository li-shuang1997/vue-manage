{"ast":null,"code":"import Cookie from \"js-cookie\";\nexport default {\n  // 定义初始数据\n  state: {\n    isCollapse: false,\n    tabsList: [{\n      path: '/',\n      name: 'home',\n      label: '首页',\n      icon: 'home'\n    }],\n    currentMenu: null,\n    menu: []\n  },\n  // 用来改变state中的数据\n  mutations: {\n    collapseMenu(state) {\n      state.isCollapse = !state.isCollapse;\n    },\n\n    selectMenu(state, val) {\n      if (val.name !== 'home') {\n        state.currentMenu = val;\n        const result = state.tabsList.findIndex(item => item.name === val.name);\n\n        if (result === -1) {\n          state.tabsList.push(val);\n        } else {\n          state.currentMenu = null;\n        }\n      }\n    },\n\n    closeTag(state, val) {\n      const result = state.tabsList.findIndex(item => item.name === val.name);\n      state.tabsList.splice(result, 1);\n    },\n\n    setMenu(state, val) {\n      state.menu = val;\n      Cookie.set('menu', JSON.stringify(val));\n    },\n\n    clearMenu(state) {\n      state.menu = [];\n      Cookie.remove('menu');\n    },\n\n    addMenu(state, router) {\n      if (!Cookie.get('menu')) {\n        return;\n      }\n\n      const menu = JSON.parse(Cookie.get('menu'));\n      state.menu = menu;\n      const menuArray = [];\n      menu.forEach(item => {\n        if (item.children) {\n          item.children = item.children.map(item => {\n            item.component = () => import(`../views/${item.url}`);\n\n            return item;\n          });\n          menuArray.push(...item.children);\n        } else {\n          item.component = () => import(`../views/${item.url}`);\n\n          menuArray.push(item);\n        }\n      }); // 路由的动态添加\n\n      menuArray.forEach(item => {\n        router.addRoute('Main', item);\n      });\n    }\n\n  }\n};","map":{"version":3,"sources":["E:/前端学习/myproject/vue-manage/vue-manage/store/tab.js"],"names":["Cookie","state","isCollapse","tabsList","path","name","label","icon","currentMenu","menu","mutations","collapseMenu","selectMenu","val","result","findIndex","item","push","closeTag","splice","setMenu","set","JSON","stringify","clearMenu","remove","addMenu","router","get","parse","menuArray","forEach","children","map","component","url","addRoute"],"mappings":"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","sourcesContent":["import Cookie from \"js-cookie\"\r\nexport default{\r\n    // 定义初始数据\r\n    state:{\r\n        isCollapse: false,\r\n        tabsList: [\r\n            {\r\n                path:'/',\r\n                name: 'home',\r\n                label: '首页',\r\n                icon: 'home'\r\n            }\r\n        ],\r\n        currentMenu: null,\r\n        menu:[]\r\n    },\r\n    // 用来改变state中的数据\r\n    mutations:{\r\n        collapseMenu(state){\r\n            state.isCollapse = !state.isCollapse\r\n        },\r\n        selectMenu(state, val){\r\n            if(val.name !== 'home'){\r\n                state.currentMenu = val\r\n                const result = state.tabsList.findIndex(item => item.name === val.name)\r\n                if(result === -1){\r\n                    state.tabsList.push(val)\r\n                }else{\r\n                    state.currentMenu =  null\r\n                }\r\n            }\r\n        },\r\n        closeTag(state,val){\r\n            const result = state.tabsList.findIndex(item => item.name === val.name)\r\n            state.tabsList.splice(result , 1)\r\n        },\r\n        setMenu(state, val){\r\n            state.menu = val\r\n            Cookie.set('menu',JSON.stringify(val))\r\n        },\r\n        clearMenu(state){\r\n            state.menu = []\r\n            Cookie.remove('menu')\r\n        },\r\n        addMenu(state, router){\r\n            if(!Cookie.get('menu')){\r\n                return\r\n            }\r\n            const menu = JSON.parse(Cookie.get('menu'))\r\n            state.menu = menu\r\n            const menuArray = []\r\n            menu.forEach(item => {\r\n                if(item.children){\r\n                    item.children = item.children.map(item => {\r\n                        item.component = () => import(`../views/${item.url}`)\r\n                        return item\r\n                    })\r\n                    menuArray.push(...item.children)\r\n                }else{\r\n                    item.component = () => import(`../views/${item.url}`)\r\n                    menuArray.push(item)\r\n                }\r\n            });\r\n            // 路由的动态添加\r\n            menuArray.forEach(item => {\r\n                router.addRoute('Main',item)\r\n            })\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}